\chapter{Einleitung}

\section{Motivation}
Der Klimawandel stellt eine der größten Herausforderungen unserer Zeit dar.
Seine Realität und die dringende Notwendigkeit, seine Hauptverursacher und Treibfaktoren zu bremsen, sind längst unbestreitbar.
Dies wird unter anderem durch den im März 2023 veröffentlichten Bericht des \ac{IPCC} deutlich bestätigt.
Der Bericht zeigt auf, dass die globale Oberflächentemperatur im Zeitraum von 2011 bis 2020 um 1,09 Grad Celsius höher lag als im Zeitraum von 1850 bis 1900 und identifiziert die nicht nachhaltige Energienutzung als einen der Haupttreiber dieser Veränderungen~\cite{IPCC.2023}.

In diesem Kontext spielt die Technologiebranche eine zentrale Rolle.
Der rasante technologische Fortschritt hat zu einem exponentiellen Wachstum der Rechenkapazitäten geführt.
%Besonders im Bereich der Softwareentwicklung ist ein stetiges Wachstum von Technologien und Anwendungen zu verzeichnen.
%!Kommentar Thomas: Übergang zu Technologiebranche zu groß. Technologie kann alles mögliche sein.
Jedoch geht dieses Wachstum mit einem erheblichen Anstieg des Energieverbrauchs einher.
Schätzungen zufolge trägt die Technologiebranche mit mehr als 10\% zu den jährlichen globalen Kohlenstoffemissionen bei~\cite{Buchanan.2023}.

Angesichts dieser Entwicklungen hat die Bedeutung nachhaltiger Technologien und Praktiken signifikant zugenommen.
Es ist von entscheidender Wichtigkeit, dass die \ac{IT}-Branche ihre Verantwortung wahrnimmt und aktiv dazu beiträgt, den Klimawandel durch innovative und nachhaltige Lösungen zu bekämpfen.
Die Entwicklung und Implementierung von energieeffizienten und kohlenstoffarmen Technologien und Methoden in der Softwareentwicklung ist daher nicht nur eine technologische Herausforderung, sondern auch eine moralische Verpflichtung gegenüber zukünftigen Generationen.

%effizienter Code oft sowohl grüner als auch schneller ist als ineffizienter Code
%aber: keine Selbstverständlichkeit, "grün", "effizient" und "performant" sind keine Synonyme
%offensichtlichste Zweck der Code-Effizienz: Anzahl und Größe der Maschinen zu reduzieren, die für das Hosting Ihrer Dienste erforderlich sind --> Anzahl der Nutzer, Zuverlässigkeit und Leistungsniveau; = Maximierung der Hardwareproduktivität, sehr umweltfreundliches Konzept
%weniger Server --> weniger Strom für den Betrieb --> das System enthält weniger Kohlenstoff (jede Maschine enthält Kohlenstoff, der bei ihrer Herstellung und Entsorgung ausgestoßen wird)
%früher nicht viel Hardwarekapazität (Maschinen waren langsam, Anschaffung teuer, Unterbringung in Rechenzentren kostspielig) --> Verwendung von hocheffizienten Sprachen wie C, sodass ausführbare Dateien klein und minimale Anzahl der CPU-Zyklen pro Vorgang; Services haben nicht zu viele Nachrichten mit anderen Maschinen ausgetauscht, Daten auf der Festplatte wurden nicht ständig abgefragt
%Warum nicht einfach dahin zurückkehren?
%Maschinen und Netzwerke verdoppelten ihre Kapazität alle achtzehn Monate (Moore´s law), sind heute mindestens drei Größenordnungen schneller als in den 90er Jahren
%Dienste von Drittanbietern wurden innovativer und wertvoller
%Nutzerzahlen stiegen, erwarteten mehr Funktionen und schnellere Entwicklung
%Sicherheitsbedrohungen wurden immer beängstigender und häufiger
%Hauptziel Maschinenproduktivität hat sich in letzten zwei Jahrzenten hin zur Entwicklerproduktivität geändert
%!siehe "Nutzen Code-Effizienz" von Building Green Software

%Der Klimawandel ist eine der größten Herausforderungen der heutigen Zeit.
%Längst ist er nicht mehr abzustreiten und macht es notwendig, die Auslöser und Beschleuniger zu bremsen.
%Der vom Menschen gemachte Klimawandel ist nicht mehr abzustreiten.
%%Es wurde mehrfach bewiesen, dass der Klimawandel Realität ist.
%Er wurde mehrfach bewiesen, zuletzt zum Beispiel durch den im März 2023 veröffentlichten Bericht des IPCC (Intergovernmental Panel on Climate Change).
%Dieser hält fest, dass die globale Oberflächentemperatur 2011 bis 2020 um 1,09 Grad Celsius wärmer war, als in den Jahren 1850 bis 1900 und nennt als einen wichtigen Auslöser eine nicht nachhaltige Energienutzung~\cite{IPCC.2023}.
%
%Die Technologiebranche spielt eine wichtige Rolle beim Klimawandel.
%Der technologische Fortschritt hat einen scheinbar unendlichen Zugang zu Rechenleistung verschafft.
%Im Bereich der Softwareentwicklung wird seit längerer Zeit eine rasche Entwicklung von Technologien verzeichnet.
%Damit einher kommt ein steigender Energieverbrauch~\cite{Buchanan.2023}.
%Schätzungsweise beläuft sich der Anteil der Technologiebranche an den jährlichen Kohlenstoffemissionen auf mehr als 10\%.
%Angesichts dessen hat der Entwurf von nachhaltigen Technologien und Praktiken an Wichtigkeit gewonnen.
%Zustande kommen diese Emissionen hauptsächlich durch zwei Faktoren:
%Zum einen durch die Herstellung von Benutzergeräten für Anwendungen, sogenannter verkörperter (englisch embodied) Kohlenstoff, und zum anderen durch den Betrieb der Anwendungen in Rechenzentren~\cite{Currie.2024}.

%Das rasche Wachstum von Softwaretechnologien und die steigende Popularität von Cloud-Diensten haben einen scheinbar unendlichen Zugang zu Rechenleistung verschafft.
%Damit einher kommt ein steigender Energieverbrauch

\section{Forschungsziele und Fragestellungen}
Das primäre Ziel dieser Arbeit liegt darin, die Nachhaltigkeit von Softwareanwendungen durch die Entwicklung eines Prognosemodells zur Vorhersage der Kohlenstoffintensität zu verbessern.
Insbesondere soll untersucht werden, wie die genauen Vorhersagen genutzt werden können, um den Aufbau der Softwarearchitektur und den Betrieb der Anwendung möglichst nachhaltig zu gestalten.
Die Arbeit wird durch folgende spezifische Forschungsfragen definiert:

\begin{enumerate}
 \item Entwicklung eines Vorhersagemodells: Wie kann ein effektives \ac{KI}-basiertes Modell zur Vorhersage der Kohlenstoffintensität des Stromnetzes entwickelt werden? Welche Rolle spielen dabei verschiedene Datentypen, wie Klimadaten und historische Daten zur Kohlenstoffintensität?
 \item Nachhaltigkeitsoptimierung von Softwareanwendungen: Inwiefern können diese Vorhersagen dazu verwendet werden, um die Architektur und den Betrieb von Software nachhaltiger zu gestalten?
 \item Simulation und Bewertung: Wie kann die Wirksamkeit der entwickelten Strategien durch Simulationen getestet und bewertet werden?
 \item Beitrag zur nachhaltigen Softwareentwicklung: Wie trägt diese Arbeit zur Förderung der Nachhaltigkeit in der Softwareentwicklung bei? Welche praktischen Erkenntnisse und Empfehlungen können abgeleitet werden? Stehen die gewonnenen Verbesserungen der Nachhaltigkeit im Verhältnis zum Aufwand der Implementierung?
\end{enumerate}
%Das Ziel dieser Arbeit ist die Entwicklung eines KI-basierten Prognosemodells, das mithilfe von Zeitreihenanalysen die Kohlenstoffintensität des Stromnetzes von Ländern in Europa vorhersagt.
%Durch die Integration dieses Modells in eine \ac{API} soll eine Schnittstelle geschaffen werden, die es Softwareanwendungen ermöglicht, ihre Betriebszeiten an die Kohlenstoffintensität des Stromnetzes anzupassen.
%Die zentralen Forschungsfragen umfassen:
%
%Wie kann ein KI-basiertes Prognosemodell effektiv die Kohlenstoffintensität des Stromnetzes vorhersagen?
%Wie können die Vorhersagen genutzt werden, um nachhaltige Scheduling-Strategien in Softwarearchitekturen zu implementieren?
%Ist die dadurch gewonnene Verbesserung der Nachhaltigkeit von Softwareanwendungen lohnenswert?

\section{Struktur der Arbeit}
\section{Themenabgrenzung}
Im Folgenden werden gezielte Abgrenzungen vorgenommen, um den Umfang und Fokus der Arbeit zu definieren und gleichzeitig relevante, jedoch nicht zentrale Themen auszugrenzen.
Diese Abgrenzungen schaffen einen klaren und strukturierten Rahmen für die Forschung und legen den Grundstein für mögliche zukünftige Arbeiten.

Nachhaltigkeit ist ein vielschichtiges Konzept, jedoch liegt der Schwerpunkt dieser Arbeit auf der ökologischen Dimension, insbesondere auf der Reduktion der Kohlenstoffintensität.
Soziale und ökonomische Nachhaltigkeitsaspekte werden nur am Rande behandelt.
Neben den Einflüssen, die die Software ausmacht, ist die Hardware ein wichtiger Faktor.
Bei ihrer Herstellung und Entsorgung freigesetzte, sogenannte verkörperte, Emissionen können einen großen Anteil ausmachen.
%!Kommentar Thomas: Software hat auch Einfluss auf verkörperte Emissionen, weil effizienter die Software ist und je weniger Hardware sie benötigt, desto weniger verkörptere Emissionen, weil Hardware wird besser genutzt.
Dieser Aspekt und daraus resultierenden Maßnahmen sind zwar signifikant, werden jedoch in dieser Arbeit nicht direkt behandelt, sondern bieten einen Ansatzpunkt für weiterführende Forschung.
Indirekt werden jedoch auch die verkörperten Emissionen thematisiert, denn Maßnahmen wie der effiziente Betrieb von Software gehen beispielsweise oft mit einer Reduzierung dieser einher.
% Indirekt sind die jedoch auch die verkörperten Emissionen betroffen, denn je effizienter die Software gestaltet ist, desto weniger Hardware benötigt sie zur Ausführung und desto weniger verkörperte Emissionen sind damit verbunden.
Die Software betreffend werden mögliche Bereiche, die hinsichtlich Nachhaltigkeit betrachtet werden können, eingeschränkt.
Nicht Teil der Arbeit sind zum Beispiel Maßnahmen auf Code-Ebene, wie die Verwendung nachhaltiger Programmiersprachen und Frameworks, effiziente Datenverwaltung und -speicherung oder nachhaltig gestaltete Benutzeroberflächen.
Der Fokus liegt allein auf Nachhaltigkeits-Verbesserungen durch die Nutzung kohlestoffarmen Stroms.
%Wichtig ist auch die Betrachtung von Hardwareeinflüssen, wie den bei Herstellung und Entsorgung freigesetzten verkörperten Kohlenstoffemissionen.
%Diese sind zwar signifikant, werden jedoch in dieser Arbeit nicht behandelt, bieten jedoch interessante Ansatzpunkte für weiterführende Forschung.

%Obwohl Nachhaltigkeit ein vielschichtiges Konzept ist, fokussiert sich diese Arbeit primär auf die ökologische Dimension der Nachhaltigkeit, insbesondere auf die Reduktion der Kohlenstoffintensität.
%Soziale und ökonomische Aspekte der Nachhaltigkeit werden nur am Rande behandelt.

Des Weiteren ist sowohl der technologische, als auch der geografische Rahmen des Vorhersagemodells begrenzt.
Die Umsetzung erfolgt durch einen Temporal Fusion Transformer und weitere möglicherweise passende Ansätze zur Umsetzung werden nicht untersucht.
Die Analyse beschränkt sich auf europäische Stromnetze, weil ein weltweiter Umfang eine enorm größer Datenmenge bedeuten würde und in möglichen anschließenden Forschungen umgesetzt werden könnte.

\chapter{Theoretischer Hintergrund}
\section{Nachhaltige Softwarearchitektur}
\subsection{Definition von Nachhaltigkeit in der Softwareentwicklung}
Das Ziel der vorliegenden Arbeit besteht darin, eine Möglichkeit zu finden, die Nachhaltigkeit von Softwarearchitekturen zu optimieren.
An dieser Stelle wird deshalb als Grundlage der Begriff der Nachhaltigkeit definiert und erklärt, welche Rolle Nachhaltigkeit in der Softwareentwicklung spielt.

Vom Bundesministerium für wirtschaftliche Zusammenarbeit und Entwicklung~\cite{BundesministeriumWirtschaftlicheZusammenarbeitundEntwicklung} wird Nachhaltigkeit wie folgt definiert:
\glqq Nachhaltigkeit oder nachhaltige Entwicklung bedeutet, die Bedürfnisse der Gegenwart so zu befriedigen, dass die Möglichkeiten zukünftiger Generationen nicht eingeschränkt werden.\grqq{}
Dabei erstrecke sich Nachhaltigkeit gleichermaßen auf drei verschiedene Dimensionen, nämlich wirtschaftlich effizient, sozial gerecht und ökologisch tragfähig.
Laut Duden ist Nachhaltigkeit in Bezug auf Ökologie das \glqq Prinzip, nach dem nicht mehr verbraucht werden darf, als jeweils nachwachsen, sich regenerieren, künftig wieder bereitgestellt werden kann\grqq{}~\cite{Dudenredaktion.27.04.2018}.

Die im Jahr 1992 auf der Konferenz für Umwelt und Entwicklung der Vereinten Nationen verabschiedeten Agenda 21 legte Nachhaltigkeit als übergreifendes Ziel der Politik fest.
Außerdem wurden in der Agenda 2030, die 2015 von der Weltgemeinschaft beschlossen wurde, 17 Nachhaltigkeitsziele definiert.
Davon sieht Ziel zwölf Nachhaltigkeit in Produktion und Konsum vor.
Die deutsche Ausarbeitung dieses Ziels besagt, dass dazu unter anderem der Verzicht auf fossile Energieträger, wie Kohle, Gas und Öl und stattdessen die Nutzung von erneuerbaren Energien gehört~\cite{Bundesregierunginformiert}.

Betrachtet man den Begriff vor dem Aspekt der Softwareentwicklung, so lassen sich die Prinzipien nachhaltiger Software wie folgt zusammenfassen~\cite{Calero.2015}:
\begin{itemize}
 \item Überwachung, Messung, Bewertung, sowie Optimierung des Ressourcen- und Energieverbrauchs während Herstellung und Nutzung der Software
 %direkten (während Herstellung und Nutzung) und indirekten () Verbrauchs natürlicher Ressourcen, der durch den Einsatz und die Nutzung entsteht, bereits im Entwicklungsprozess;
 %wobei sich direkt auf den Verbrauch während der Herstellung und Nutzung bezieht und indirekt auf die Verwendung des Softwareprodukts zusammen mit anderen Prozessen und langfristigen systemischen Auswirkungen
\item Möglichkeit zur kontinuierlichen Auswertung und Optimierung des Einsatzes und der Nutzungsfolgen der Software
\item Zyklische Bewertung und Minimierung des Verbrauchs von natürlichen Ressourcen und Energie während der Entwicklungs- und Produktionsprozesse
\end{itemize}
Nachhaltige Software zeichnet sich also dadurch aus, dass die negativen Auswirkungen auf die drei Bereiche der Nachhaltigkeit (Wirtschaft, Gesellschaft und Umwelt) während Entwicklung, Einsatz und Nutzung der Software gering gehalten werden oder sich sogar positiv auf diese auswirken.

Die \ac{IT} spielt für das Thema Nachhaltigkeit eine wichtige Rolle und das sowohl als Teil des Problems, als auch als Teil der Lösung~\cite{Calero.2015}.
Diese Arbeit spricht von den drei genannten Ausprägungen der Nachhaltigkeit hauptsächlich die ökologische Tragfähigkeit an, die auch als \glqq grüne\grqq{} oder \glqq umweltfreundliche\grqq{} Dimension bezeichnet wird.
Betreffend dieser Dimension kann die \ac{IT} zwei verschiedene Rollen annehmen, bezeichnet als Green in \ac{IT} und Green by \ac{IT}\@.
Tabelle~\ref{tab:GreenInByIT} grenzt die beiden Begriffe voneinander ab.
Beschrieben wird jeweils die Rolle der \ac{IT}, das Ziel und das Potenzial der beiden Bereiche, untermauert durch je ein Beispiel.

\begin{table}[t]
 \centering\small
 \caption{Green in \ac{IT} vs. Green by \ac{IT}}
 \label{tab:GreenInByIT}
 \input{\tabledir/GreenInByIT.tex}
\end{table}

Die Unterteilung ist sowohl für Software als auch für Hardware relevant.
Demnach bestehen vier Hauptkategorien:
Green in Software, Green in Hardware, Green by Software, Green by Hardware.
Diese Arbeit konzentriert sich nicht auf die Hardware-bezogenen Aspekte.
Sie thematisiert die Kohlenstoffintensität und damit die Emissionen, die Software verursacht und ist deshalb der Kategorie Green in Software zuzuordnen.
Betrachtet man die Prognose der Kohlenstoffintensität mithilfe von Künstlicher Intelligenz, so könnte man dabei die \ac{IT} auch als Hilfsmittel zur Verbesserung der Nachhaltigkeit ansehen und somit Green by Software zuordnen~\cite{Calero.2015}.

Von der Green Software Foundation werden die Stellschrauben für grüne Software in drei Faktoren unterteilt, nämlich Energie-Effizienz, Hardware-Effizienz und Kohlenstoff-Bewusstsein.
Energieeffiziente Software zeichnet sich dadurch aus, dass sie so wenig Energie wie möglich verbraucht.
Hardware-Effizienz wird erreicht, wenn bei der ausführenden Hardware die Menge des verkörperten Kohlenstoffs auf ein Minimum beschränkt wird.
Diese beiden Faktoren sind zwar wichtig, aber werden in der vorliegenden Arbeit nicht weiter berücksichtigt, denn der Fokus liegt auf dem bewussten Umgang mit Kohlenstoff.
Ein bewusster Umgang mit Kohlenstoff setzt voraus zu verstehen, dass die gleiche Menge an verbrauchter Energie nicht immer die gleiche Kohlenstoffintensität hat, da diese je nach Zeitpunkt und Ort des Verbrauchs variiert~\cite{GreenSoftwareFoundation.2022}.

\subsection{Kohlenstoffintensität als Maß für Nachhaltigkeit}
Im Folgenden gilt es, Kohlenstoffintensität zu definieren und die Frage zu klären, wie diese mit Nachhaltigkeit zusammenhängt.
Der Begriff Kohlenstoff wird häufig als Synonym für alle Treibhausgase und als Oberbegriff für die Auswirkungen aller Arten von Emissionen und Aktivitäten auf die globale Erwärmung verwendet~\cite{GreenSoftwareFoundation.2022}.
Die Kohlenstoffintensität wird in Gramm \ac{CO2} pro \ac{kWh} angegeben und sagt aus, wie viel Kohlendioxid pro verbrauchter \ac{kWh} Strom emittiert wird~\cite{LyndonRuff.20220420T15:34:17.000Z}.
\ac{CO2} gehört zu den Treibhausgasen.
Diese kommen zwar natürlich in der Erdatmosphäre vor, um Wärme zurückzuhalten.
Jedoch sind sie durch menschliche und industrielle Aktivitäten im Überfluss vorhanden, was einen globalen Temperaturanstieg und Klimakatastrophen zur Folge hat~\cite{Currie.2024}.
Kohlenstoffintensität ist also ein Maß der Nachhaltigkeit des erzeugten oder verbrauchten Stroms.
Je geringer der Wert ist, desto nachhaltiger ist der Strom.
Genauer betrachtet führt ein verringerter Anteil von Energiequellen mit hoher \ac{CO2}-Emission (z.B.\ Braun- oder Steinkohle) am erzeugten Strom zu einem geringeren Emissionsfaktor des Stromnetzes.
Eine weitere Größe, die den Emissionsfaktor beeinflusst, ist der Wirkungsgrad des Energieträgers.
Ein Anstieg des Wirkungsgrads von Energiequellen mit hoher \ac{CO2}-Emission führt letztlich ebenfalls zu einem geringeren Emissionsfaktor des Stromnetzes, weil dann weniger dieser Quellen benötigt werden, um die gleiche Menge an Strom zu erzeugen~\cite{Icha.2020}.

Um Strom zu erzeugen, muss Energie einer anderen Form in elektrische Energie umgewandelt werden.
In Kohlekraftwerken wird zum Beispiel Kohle in einem Kessel verbrannt um Dampf zu erzeugen, der chemische Energie in elektrische Energie umwandelt.
Als Nebenprodukt wird viel Kohlendioxid freigesetzt, was die Stromerzeugung durch fossile Brennstoffe zu einer kohlenstoffintensiven Variante macht~\cite{Currie.2024}.
Stellt man sich vor, dass ein Gerät seinen Strom direkt aus einem Windkraftwerk beziehen würde, hätte diese Energie eine Kohlenstoffintensität von 0 g \ac{CO2}/\ac{kWh}, weil bei der Energieerzeugung durch Wind kein Kohlenstoff freigesetzt wird~\cite{GreenSoftwareFoundation.2022}.
Das Stromnetz ist jedoch ein Mix verschiedener Energiequellen (deshalb auch als Strommix bezeichnet), die sich unterschiedlich auf die Kohlenstoffintensität auswirken.
Bei der Verwendung von Strom kann nicht zwischen verschiedenen Erzeugungsarten ausgewählt werden, weshalb nur die Intensität des Gesamtnetzes betrachtet werden kann.
Durch erneuerbare Energien, wie Wind-, Solar-, oder Wasserenergie, erzeugter Strom ist weniger kohlenstoffintensiv, jedoch variiert seine Verfügbarkeit je nach Zeit und Ort der Stromerzeugung.
Die Zeit ist ein wichtiger Faktor, weil ein direkter Zusammenhang zwischen Zeit und Wetter besteht und vom Wetter wiederum die erneuerbaren Energien abhängig sind.
Außerdem verfügen verschiedene Länder und Regionen über eine unterschiedliche Zusammensetzung des Stromnetzes.
Um die \ac{CO2}-Bilanz des verwendeten Stroms so gering wie möglich zu halten, ist es deshalb wichtig zu wissen, wann und wo die Kohlenstoffintensität des Stromnetzes gering ist.
So kann zum Beispiel, wenn es die Anforderungen erlauben, die Nutzung des Stroms auf kohlenstoffarme Zeiten verschoben werden.
Hinzu kommt, dass erneuerbare Energien in Betrieb und Wartung verhältnismäßig billig sind, was dazu führt, dass deren erzeugter Strom nicht nur umweltfreundlicher, sondern meist auch kostengünstiger ist~\cite{NationalGrid.20231106T13:28:05.000Z}.

Ein weiterer wichtiger Faktor ist das Zusammenspiel aus Energieangebot und -nachfrage.
Die Nachfrage kann stark schwanken, doch muss das Stromnetz trotzdem immer in der Lage sein, diese zu decken.
Optimal wäre es natürlich, das Angebot unverzüglich an die Nachfrage anpassen zu können, jedoch variiert die Flexibilität je nach Energiequelle stark.
Betrachtet man zum Beispiel Windenergie, liegt auf der Hand, dass diese über eine sehr geringe Flexibilität verfügt, weil die Windstärke nicht kontrolliert werden kann.
Bei Kohleenergie ist es weitaus einfacher, auf ein Angebotsdefizit zu reagieren.
Eine wichtige Größe ist dabei die marginale Kohlenstoffintensität~\cite{GreenSoftwareFoundation.2022}.
Übersteigt der Strombedarf plötzlich die vorhandene Energie(?), wird die benötigte Energie aus dem sogenannten Grenzkraftwerk bezogen.
%Steigt der Strombedarf plötzlich an,
Dieses zeichnet sich dadurch aus, dass es auf solche Änderungen schnell reagieren kann.
Um den Strompreis so gering wie möglich zu halten, werden die verfügbaren Energiequellen aufsteigend ihres Preises angeordnet~\cite{Corradi.20231207T10:48:51.000Z}.
Diese sogenannte Merit-Order (im Deutschen als Reihenfolge der Vorteilhaftigkeit bezeichnet) ist das Zusammenspiel aus Stromangebot, -preis und -bedarf.
Eine beispielhafte Merit-Order des deutschen Stromnetzes ist in Abbildung~\ref{FIG:merit-order} dargestellt.
\begin{figure}
 \caption{Die Merit-Order des deutschen Stromnetzes~\cite{Gro.5.10.2022}}
 {\includegraphics[width=1\textwidth]{\figdir/merit-order}}
 \label{FIG:merit-order}
\end{figure}
Die verschiedenen Energiequellen sind nach Preis aufsteigend angeordnet und durch den eingezeichneten Strombedarf wird ersichtlich, welche dieser Quellen je nach Bedarf herangezogen werden.
Eine ausreichende Stromversorgung wird durch Hinzuziehen einer geeigneten Menge an Kraftwerken garantiert, wobei die Quellen mit niedrigstem Preis die höchste Priorität haben.
Daraus lässt sich schließen, dass der Strom sowohl günstiger als auch grüner wird, je mehr erneuerbare Energien eingespeist werden~\cite{Gro.5.10.2022}.

Es bestehen verschiedene Ansätze für die Berechnung der Kohlenstoffintensität.
Allgemein stellt sich die Berechnung als anspruchsvoll heraus, vor allem weil jedes Land seine eigene Zusammenstellung verschiedener Kraftwerke hat~\cite{Currie.2024}.
Für eine Berechnungsweise (Formel~\ref{eq:ci}), die Forscher aus Großbritannien für die Carbon Intensity \ac{API} verwendet haben, wird der Anteil der verschiedenen Energiequellen, ein Intensitätsfaktor je Energiequelle und die Stromnachfrage benötigt.
\begin{equation}
 \label{eq:ci}
 C_t = \frac{\sum_{g=1}^{G} P_{g,t} \times c_g}{D_t}
\end{equation}
Die Kohlenstoffintensität Ct zur Zeit t ist das Produkt aus Energiequelle und Intensitätsfaktor summiert für alle verwendeten Energiequellen und anschließender Teilung durch die Nachfrage~\cite{LyndonRuff.20220420T15:34:17.000Z}.
Für \ac{CO2}-Emissionen durch erneuerbare Energien sowie durch Kernkraft wird der Intensitätsfaktor mit 0 berechnet, sodass für diese Energiequellen das Gesamtergebnis der Kohlenstoffintensität gleich 0 ist.

Ein weiterer Berechnungsansatz, der von der Green Software Foundation speziell für Software entwickelt wurde, ist der sogenannte \ac{SCI} Wert.
Er gibt die Kohlenstoffemissionen einer funktionalen Einheit R in g\ac{CO2}/\ac{kWh} an~\cite{GreenSoftwareFoundation.2022}.
In seine Berechnung fließen die benötigte Energie E, die standortbezogene marginale Kohlenstoffemissionen I und die verkörperten Emissionen M der zugrunde liegenden Hardware ein.
Die entsprechende Formel ist in Formel~\ref{eq:sci} zu sehen.
R ist eine Skaliereinheit, die für die zu messende Software relevant ist und kann zum Beispiel pro Benutzer oder pro Gerät sein~\cite{Buchanan.2023}.
\begin{equation}
 \label{eq:sci}
 SCI = ((E \times I) + M) pro R
\end{equation}

Wie bereits erwähnt kann eine Anwendung nachhaltiger betrieben werden, indem der Strombedarf auf die Kohlenstoffintensität ausgerichtet wird.
Durch sogenanntes Demand-Shifting, also der Verschiebung der Nachfrage je nach Kohlenstoffintensität, kann zwischen 45\% und 90\% Kohlenstoff eingespart werden.
Diese Verlagerung kann sowohl auf zeitlicher Ebene als auch auf örtlicher Ebene stattfinden~\cite{GreenSoftwareFoundation.2022}.
Eine ähnliche Methode, die ebenfalls das Ziel verfolgt, die Kohlenstoffemissionen zu senken, ist das Demand-Shaping.
Dabei wird bei geringer Kohlenstoffintensität die volle Funktionalität geboten und bei hoher Kohlenstoffintensität Einschränkungen getroffen oder die Funktionalität reduziert.
Am besten anwendbar sind diese Methoden bei nicht-zeitkritischen Aufgaben.
Diese können auf Zeiten mit niedriger Kohlenstoffintensität verschoben werden (Demand-Shifting) und zu solchen Zeiten können viele dieser Aufgaben abgearbeitet werden, wodurch sich der Bedarf erhöht (Demand-Shaping)~\cite{Currie.2024}.

\subsection{Herausforderungen und vorhandene Tools}
%Verwaltete Cloud-Dienste bieten aufgrund ihrer hohen Rechendichte und ihrer enormen Hardware- und Energienutzung ein großes Potenzial zur Effizienzverbesserung~\cite{Currie.2024}.
Die drei großen Cloud-Anbieter Google Cloud, Azure und AWS haben sich zur Kohlenstoffneutralität verpflichtet.
Dies bedeutet jedoch nicht, dass es allein ausreichend ist, eine Anwendung auf einer dieser Plattformen bereitzustellen und sich nicht weiter mit dem Thema Nachhaltigkeit auseinander setzten muss.
Auch die Anwendung selbst muss für Nachhaltigkeit optimiert sein und die vorhanden Möglichkeiten müssen genutzt werden~\cite{Newman.2023}.
Der deutsche Bitkom hat in einer Metastudie auf Grundlage von mehreren Studien aus den Jahren 2012 bis 2019 zwei Hauptkategorien für Energieensparungen definiert: Anwendungen und Infrastruktur.
In Abbildung~\ref{FIG:sustainability-infrastructure} werden die Facetten der Nachhaltigkeit auf Anwendungs- und Infrastrukturebene dargestellt.
Von Amazon~\cite{Mokhtari.2023} wird dieses Modell als Modell der geteilten Verantwortungen vorgestellt.
Der Cloud-Anbieter ist für die Nachhaltigkeit der Cloud verantwortlich, dies beinhaltet unter anderem die Bereitstellung einer effizienten, gemeinsam genutzten Infrastruktur, die Wasserverantwortung und die Beschaffung erneuerbarer Energien.
Der Cloud-Nutzer ist für die Nachhaltigkeit in der Cloud verantwortlich, also zum Beispiel das Optimieren von Workloads und Ressourcennutzung und das Minimieren der Gesamtressourcen, die für die Workloads bereitgestellt werden müssen~\cite{Mokhtari.2023}.
\begin{figure}
 \caption{Nachhaltigkeit auf Anwendungs- und Infrastrukturebene, eigene Darstellung nach ~\cite{Mokhtari.2023}}
 {\includegraphics[width=1\textwidth]{\figdir/SustainabilityOfAndOnInfrastructure}}
 \label{FIG:sustainability-infrastructure}
\end{figure}

Eine große Herausforderung besteht darin, das Thema Nachhaltigkeit in der \ac{IT} anzubringen.
Lange wurde diesem keine Aufmerksamkeit geschenkt und Optimierungen fanden hauptsächlich für anfallende Kosten statt.
Wenn der Umweltaspekt nicht Motivation genug ist, können noch zwei weitere Aspekte hilfreich sein.
Zum einen gehen mit der Optimierung des Energieverbrauchs und der Umstellung auf grüne Energiequellen oft verminderte Stromkosten einher, was als Anreiz dienen kann.
Zum anderen werden immer mehr Vorschriften und Berichtsanforderungen in Bezug auf verursachte Emissionen eingeführt~\cite{expand}.
Dies sind weitere Gründe, sich mit der Energienutzung zu beschäftigen.

Für Großbritannien besteht ein Zusammenschluss zwischen dem nationalen Stromnetz, mehreren Nichtregierungsorganisationen und akademischen Einrichtungen, der eine \ac{API} konzipiert hat, um die Kohlenstoffintensität für verschiedene Regionen Großbritanniens vorherzusagen.
Diese Schnittstelle basiert auf maschinellem Lernen und ermöglicht Anwendern, ihren Stromverbrauch so zu planen, dass die Kohlenstoffemissionen auf regionaler Ebene minimiert werden~\cite{Currie.2024}.
Dafür wurde der Berechnungsansatz, der im vorherigen Kapitel (Formel~\ref{eq:ci}) erklärt wurde, verwendet.
Der Intensitätsfaktor der verschiedenen Energiequellen ist dabei spezifisch für die jeweilige Region oder das jeweilige Land.

Carbon Aware \ac{SDK} ist ein experimentelles Projekt der Green Software Foundation, welches als Hilfsmittel für Software gedacht ist, um die umweltfreundlichsten Energiequellen für deren Betrieb zu verwenden.
Es wird sowohl die zeitliche als auch die örtliche Komponente für die Verlagerung von Workloads berücksichtigt.
Carbon Aware \ac{SDK} kann als Web\ac{API} und als Command Line Interface verwendet werden und steht als Open-Source-Projekt zur Verfügung~\cite{GreenSoftwareFoundation.20231212T09:58:27.000Z}.

Electricity Maps bietet eine \ac{API} an, über die verschiedene Daten wie z.B.\ die Kohlenstoffintensität oder die Zusammensetzung des Strommixes abgefragt werden können.
Die Abdeckung umfasst über 160 Regionen weltweit und es sind historische, aktuelle und zukünftige (24 Stunden im Voraus) Werte verfügbar~\cite{ElectricityMaps.20231220T09:16:49.000Z}.

WattTime stellt ebenfalls eine \ac{API} zur Verfügung.
Über diese kann z.B.\ die marginale und die durchschnittliche Kohlenstoffintensität in der Vergangenheit, in Echtzeit oder 24 Stunden im Voraus abgefragt werden.
Die Daten sind in einem Intervall von fünf Minuten erhältlich~\cite{WattTime.20231130T19:28:06+00:00}.

\section{KI-gestützte Prognosemodelle für Umweltdaten}
\subsection{Überblick über Zeitreihenprognose}
Zeitreihenprognose lässt sich unterteilen in die beiden Begriffe Zeitreihe und Prognose.
Eine Zeitreihe ist eine Reihe von Datenpunkten in zeitlicher Abfolge~\cite{Peixeiro.2022}.
Es ist eine Art von Datensatz, die angibt, wie sich ein bestimmter Sachverhalt im Laufe der Zeit verhält.
Die wichtigste Spalte eines Zeitreihendatensatzes ist die Zeitspalte, anhand derer er geordnet werden kann.
Um Zeitreihendaten verarbeiten zu können, müssen oft spezielle Techniken zur Vorverarbeitung und zum Feature-Engineering angewandt werden~\cite{Lazzeri.2021}.
Eine Prognose ist eine Vorhersage für die Zukunft, basierend auf Daten aus der Vergangenheit und mithilfe von Wissen über mögliche künftige Ereignisse, von denen die Entwicklung beeinflusst werden kann~\cite{Peixeiro.2022}.

Dadurch, dass man bei der Zeitreihenprognose -- wie typisch für Regressionsprobleme -- historische Daten hernimmt und zukünftige Werte als Funktion der vergangenen ausdrückt, könnte man die beiden im ersten Moment gleichsetzen.
Eine Zeitreihenprognose unterscheidet sich jedoch von anderen Regressionsaufgaben hauptsächlich in zwei Eigenschaften:
Zeitreihen haben eine Ordnung und sie müssen nicht zwingend über andere Merkmale als die Zielvariable verfügen.
Sie können durchaus lediglich aus der Zeitspalte und einer zugehörigen Wertespalte bestehen.
Das kann ausreichend sein, weil die Zeit in diesem Fall als einzige Variable die Zielspalte definiert.
Es ist wichtig, die zeitliche Reihenfolge der Werte einzuhalten, denn sie zeichnet die Beziehung der Werte untereinander aus und ist somit ausschlaggebend für das Ergebnis.
Bei klassischen Regressionsaufgaben wird oft eine Vielzahl von Merkmalen verwendet, mit deren Hilfe der zu bestimmende Wert definiert werden kann.
Im Gegensatz dazu können die Datensätze von Zeitreihenprognosen wesentlich schlanker sein~\cite{Peixeiro.2022}.

Jede Zeitreihe kann in drei verschiedene Komponenten zerlegt werden.
Der zugrunde liegende Vorgang wird als Dekomposition bezeichnet.
Diese Komponenten enthüllen Merkmale, die die Daten aufweisen:
Der Trend beschreibt die Veränderungen in einer Zeitreihe, die Saisonalität stellt sich wiederholende Zyklen über einen bestimmten Zeitraum dar und die Residuen, auch als Noise bezeichnet, definieren nicht durch den Trend oder die Saisonalität abzubildende, zufällige Fehler~\cite{Peixeiro.2022}.

\subsection{Anwendungen und Vorteile für den Softwarebetrieb}
Zeitreihenvorhersagen eignen sich besonders gut, um den Verlauf und die Entwicklung von Werten über die Zeit analysieren zu können.
Das Potenzial eines solchen Machine-Learning-Modells soll deshalb zum Einsatz kommen.
Die Kohlenstoffintensität von Strom hängt stark von der Verfügbarkeit erneuerbarer Energien ab und diese sind wiederum auf bestimmte Wetterverhältnisse angewiesen.
Um eine aussagekräftige Vorhersage machen zu können ist es deshalb sinnvoll, sowohl eine Beobachtung der Kohlenstoffintensitätswerte in der Vergangenheit anzustellen, als auch den Einfluss des Wetters zu beobachten.
Für einen Zeitpunkt in der Zukunft kann dann ein möglichst wahrscheinlicher Wert ausgehend vom zu erwartenden Wetter vorhergesagt werden.

\section{Scheduling-Methoden in Softwareanwendungen}
\subsection{Grundlagen des Scheduling}
Unter Scheduling versteht man im Allgemeinen die optimierte Zuteilung von Ressourcen zu Aufgaben in bestimmten Zeiträumen.
Dabei kann die zum Ziel gesetzte Optimierung vielerlei Ausführungen haben, zum Beispiel die Fertigstellungszeit so gering wie möglich zu halten oder die Anzahl der zu spät vollendeten Aufgaben zu minimieren~\cite{Gawiejnowicz.2020}.

Ein Scheduling-Problem S wird durch vier verschiedene Größen definiert~\cite{Gawiejnowicz.2020}:
\begin{itemize}
 \item Die Menge an auszuführenden Arbeiten J
 \item Die Menge an ausführenden Einheiten M
 \item Die Menge an zusätzlichen für die Ausführung benötigten Einheiten R
 \item Ein Maß für die Qualität der Lösung %ϕ.
\end {itemize}
Außerdem hat ein Scheduling-Problem verschiedene Eigenschaften, die im Folgenden kurz erklärt werden~\cite{Pinedo.2022}:
\begin{itemize}
 \item Bearbeitungszeit: Die Bearbeitungszeit eines Auftrags auf einer Maschine. Diese kann abhängig von der jeweiligen Maschine sein.
 \item Freigabedatum: Der Zeitpunkt, an dem der Auftrag im System eintritt und somit der frühestmögliche Zeitpunkt für den Beginn des Auftrags
 \item Fälligkeitsdatum: Der Zeitpunkt der zugesagten Fertigstellung. Muss das Fälligkeitsdatum eingehalten werden, wird es als Frist bezeichnet.
 \item Gewicht: Ein Prioritätsfaktor, der die Bedeutung des Auftrags im Verhältnis zu den anderen Aufgaben im System angibt
\end{itemize}

\subsection{Möglicher Einfluss von Scheduling auf Kohlenstoffemissionen}
Die Green Software Foundation definiert Kohlenstoffbewusstsein als Modifizierung von Berechnungen, um die Umwelt so wenig wie möglich zu belasten~\cite{GreenSoftwareFoundation.2022}.
Als Lösung sollen Software-Workloads, die viel Rechenleistung benötigen, auf Zeiten und Orte verlagert werden, bei denen der Strommix zu den geringst möglichen Kohlenstoffemissionen führt.
Für viele Unternehmen bietet die Verlagerung in die Cloud einen Ansatz der Verbesserung durch zentralen Verwaltung, Konsolidierung von Ressourcen und Effizienzsteigerungen.
Durch zunehmendes Migrieren in die Cloud wird es umso wichtiger, dass die entsprechenden Betreiber sich um den ökologischen Fußabdruck ihres Services kümmern~\cite{Buchanan.2023}.

Zur Veranschaulichung, welchen Einfluss die zeitliche Verschiebung von Workloads haben kann, soll zunächst ein beispielhaftes Verhältnis von Stromangebot und -nachfrage betrachtet werden (Abbildung~\ref{FIG:grid-supply-demand}).
\begin{figure}
 \caption{Eine beispielfhafte Darstellung von Angebot und Nachfrage eines Stromnetzes~\cite{Peixeiro.2022}.}
 {\includegraphics[width=0.9\textwidth]{\figdir/grid-supply-demand}}
 \label{FIG:grid-supply-demand}
\end{figure}
In dieser Darstellung wird ersichtlich, dass zur Mittagszeit die Verfügbarkeit von Solarstrom besonders hoch ist.
Gleichzeitig übersteigt das Angebot in diesem Zeitraum die Nachfrage.
Dieses überschüssige Angebot könnte genutzt werden und der höhere Stromverbrauch würde keine zusätzlichen Emissionen verursachen~\cite{Buchanan.2023}.
Eine Studie von Microsoft (\cite{Dodge.06212022}) aus dem Jahr 2022 hat aufgezeigt, dass durch Zeitverschiebung durchschnittlich 15\% weniger Kohlenstoffintensität (gemessen am \ac{SCI}) erreicht werden kann.
Diese hat sich zwar auf Aufgaben von Künstlicher Intelligenz in der Cloud konzentriert, sie zeigt jedoch auf, dass die zeitliche Verlagerung von rechenintensiven Workloads ein großes Verbesserungspotenzial birgt.
Das größte Potenzial der Zeitverschiebung liegt demnach in der Verschiebung von Workloads mit kurzer Dauer und großem Volumen in Regionen mit großer Unstetigkeit~\cite{Buchanan.2023}.

Einen weitaus größeren Einfluss als die zeitliche Verlagerung kann laut der gleichen Studie jedoch die örtliche Verlagerung haben.
Die Kohlenstoffintensität kann dadurch um bis zu 75\% reduziert werden~\cite{Dodge.06212022}.

\chapter{KI-basierte API zur Prognose der Kohlenstoffintensität}
\section{Entwicklung des KI-Zeitreihenprognosemodells}
Der potenzielle Ablauf eines Zeitreihenprognose-Projekts ist in Abbildung~\ref{FIG:process-time-series-forecasting} zu sehen.
Er dient als Richtlinie für die einzelnen Arbeitsschritte eines solchen Prognoseprojekts und deren Reihenfolge.

%\begin{figure}
% \caption{Eine vereinfachte Darstellung, wie ein Prognoseprojekt in einzelnen Schritten ablaufen kann~\cite{Peixeiro.2022}.}
% {\includegraphics[width=0.5\textwidth]{\figdir/process-time-series-forecasting}}
% \label{FIG:process-time-series-forecasting}
%\end{figure}

Diesem Ablauf soll im vorliegenden Projekt Folge geleistet werden.
Zu Beginn gilt es, das Ziel festzulegen: Die Kohlenstoffintensität des Stromnetzes vorherzusagen.
Im nächsten Schritt soll definiert werden, was vorhergesagt werden muss, um das zuvor definierte Ziel zu erreichen.
Einen Horizont abzustecken gestaltet sich für das vorliegende Projekt schwierig.
Es handelt sich hier nicht um einen konkreten Zeitrahmen, denn die Prognose soll für einen beliebigen Zeitpunkt in der Zukunft verwendet werden können.
Waren die bisherigen Schritte rein konzeptioneller Natur, beginnt nun die praktische Umsetzung~\cite{Peixeiro.2022}.

%Quelle~\cite{iamleonie.15.3.2022}

\subsection{Datenauswahl und -vorverarbeitung}
Zum einen werden Werte der Kohlenstoffintensität aus der Vergangenheit benötigt, um die Kohlenstoffintensität abhängig von der Zeit vorhersagen zu können.
Als Maß wird dabei die marginale Kohlenstoffintensität verwendet.
Diese gibt die Emissionsintensität der Grenzkraftwerke an, die auf die veränderte Stromnachfrage (z.B. durch Scheduling) reagieren~\cite{Buchanan.2023}.
Dadurch ist diese sehr gut für den vorliegenden Anwendungsfall geeignet.
Als Datengrundlage dient das Datenmodell zur Marginal Operating Emissions Rate (MOER, zu Deutsch Grenzbetriebsemissionsrate) von WattTime.
Die MOER wird für einen bestimmten Zeitpunkt und Ort angegeben und kann dadurch gut verglichen werden.
Ziel ist es, die elektrische Last auf Zeiten mit niedrigen Werten zu verlagern, um die Umwelt weniger zu belasten.
Wie gut die Daten dafür geeignet sind, hängt von verschiedenen Faktoren ab, zum Beispiel ob MOER-Werte in Echtzeit vorliegen oder wie genau diese Werte sind.
Die Schwierigkeit besteht darin, dass zwei Fälle miteinander verglichen werden müssen, nämlich dass die Lastverschiebung stattfindet und dass sie nicht stattfindet, von denen nicht beide gleichzeitig umgesetzt werden können.
Durch schwankende Bedingungen im Stromnetz ändert sich die MOER ständig, weshalb man den Fall der Lastverschiebung und den Fall, in dem keine Last verschoben wird, nicht einfach hintereinander ausprobieren kann.
Eine mögliche Lösung dieses Problems ist, die Netzbedingungen mitzubetrachten und davon auszugehen, dass bei gleichen Bedingungen auch die MOER gleich ist.
Diesen Ansatz nutzt WattTime und überprüft dessen Genauigkeit durch verschiedenste Experimente~\cite{WattTime.2022}.
% pro kWh wird soviel mehr g CO2 ausgestossen
% Electricity Maps Beitrag zu MOER !
Die Verfügbarkeit von erneuerbaren Energien hängt maßgeblich vom Wetter ab.
Dieser Zusammenhang kann für die Vorhersage genutzt werden, weshalb Wetterdaten zum Modell hinzugefügt werden.
Dafür wird auf den Copernicus Climate Change Service~\cite{Copernicus.20231212T14:09:40.000Z} zurückgegriffen, der umfangreiche Datensätze rund um das weltweite Klima und den Klimawandeln zur Verfügung stellt.
Konkret wurden drei mögliche Einflussfaktoren für die Kohlenstoffintensität als wichtig identifiziert und ausgewählt: die Lufttemperatur in 2 m Höhe, die Windgeschwindigkeit in 100 m Höhe und die globale horizontale Bestrahlungsstärke (englisch global horizontal irradiance, kurz ~\ac{GHI}).
Letztere wird durch die atmosphärische Zusammensetzung mit Aerosolen, Wasserdampf und Ozon, hauptsächliche jedoch von Wolken beeinflusst~\cite{KallioMyers.2020}.
Für die Stromerzeugung durch Photovoltaik ist in erster Linie die Sonneneinstrahlung, die auf das Solarmodul einfällt, entscheidend~\cite{James.}.
Die Erzeugung durch Windkraft hängt hauptsächlich von der Windgeschwindigkeit ab.
Der Verlauf der drei Kennwerte in Deutschland ist in den Abbildungen~\ref{FIG:temp_de_2015-2022},~\ref{FIG:ws_de_2015-2022} und~\ref{FIG:ghi_de_2015-2022} dargestellt, er wurde alle drei Stunden aufgezeichnet.
Die Lufttemperatur wurde in zwei Metern Höhe gemessen und die Windgeschwindigkeit in 100 Metern Höhe~\cite{Copernicus.20231212T14:09:40.000Z}.
\begin{figure}
 \caption{Die Lufttemperatur in Deutschland von 2015 bis 2022~\cite{Copernicus.20231212T14:09:40.000Z}.}
 {\includegraphics[width=0.99\textwidth]{\figdir/temp_de_15-22}}
 \label{FIG:temp_de_2015-2022}
\end{figure}
\begin{figure}
 \caption{Die Windgeschwindigkeit in Deutschland von 2015 bis 2022~\cite{Copernicus.20231212T14:09:40.000Z}.}
 {\includegraphics[width=0.99\textwidth]{\figdir/ws_de_15-22}}
 \label{FIG:ws_de_2015-2022}
\end{figure}
\begin{figure}
 \caption{Die globale horizontale Strahlungsstärke in Deutschland von 2015 bis 2022~\cite{Copernicus.20231212T14:09:40.000Z}.}
 {\includegraphics[width=0.99\textwidth]{\figdir/ghi_de_15-22}}
 \label{FIG:ghi_de_2015-2022}
\end{figure}

\subsection{Entwurf des Vorhersagemodells}
Zunächst sollen die Anforderungen an das Modell beschrieben werden, um dann die Wahl des Modells festzulegen und diese zu begründen.
Das Modell soll in der Lage sein, den Zusammenhang zwischen Wetterdaten und den Werten der marginalen Kohlenstoffintensität für ein bestimmtes Land zu einem bestimmten Zeitpunkt zu erlernen.

Ein \ac{TFT} ist ein \ac{DNN} mit besonderer Architektur für das Multi-Horizon Forecasting, also die Vorhersage für mehrere zukünftige Zeitschritte.
\ac{DNN}s werden zunehmen für diese Aufgabe herangezogen, weil sie verglichen mit herkömmlichen Zeitreihenmodellen große Leistungsverbesserungen aufzeigen.
Bei anderen aufmerksamkeitsbasierten Methoden, die auch Transformer-basierte Modelle mit einschließen, besteht oft das Problem, dass die verschiedenen Datenquellen (z.B. Static Covariates) nicht ausreichend berücksichtigt werden.
Außerdem können sie oft die Bedeutung verschiedener Daten in einem bestimmten Zeitabschnitt unterscheiden.
Andere \ac{DNN}s neben dem \ac{TFT} haben zum Beispiel den Nachteil, dass sie die zeitliche Anordnung der Eingangsmerkmale nicht berücksichtigen (konventionelle Formen von LIME und SHAP), obwohl diese Abhängigkeit in Zeitreihen signifikant sind~\cite{Lim.19.12.2019}.

Auch wenn der \ac{TFT} ein großes Modell ist und am besten für große Datenmengen geeignet ist, erzielt er auch für kleine Datensätze mit ca. 20 000 Samples gute Ergebnisse~\cite{Beitner.2020}.
Er verwendet als Input verschiedenste Daten, wie in Abbildung~\ref{FIG:tft-forecasting} dargestellt~\cite{Lim.19.12.2019}:
\begin{itemize}
 \item Werte der Zielvariablen aus der Vergangenheit (Past Targets)
 \item Zeitlich abhängige bekannte Informationen sowohl für die Vergangenheit, als auch für die Zukunft (Known Inputs)
 \item Zeitlich abhängige jedoch nur in der Vergangenheit bekannte Eingabewerte (Observed Inputs)
 \item Feststehende, zeitunabhängige Daten, die einen kontextuellen Zusammenhang bieten (Static Covariates)
\end{itemize}
\begin{figure}
 \caption{Multi-horizon Forecasting mit dem \ac{TFT}~\cite{Lim.19.12.2019}.}
 {\includegraphics[width=0.7\textwidth]{\figdir/TFT_multi-horizon-forecasting}}
 \label{FIG:tft-forecasting}
\end{figure}
Die Ausgabe des Modells ist nicht ein einziger Wert, sondern ein Werteintervall (Prediction Interval).
Die Multi-Horizon Vorhersage ist deshalb so komplex, weil trotz weniger Informationen darüber, das Zusammenspiel und die Abhängigkeit der Daten untereinander erlernt werden müssen~\cite{Lim.19.12.2019}.

Jeder Wert der Zielvariablen $i$ ist an eine oder mehrere Static Covariates $s_i$, an zeitabhängige Variablen $\chi_{i,t}$ und skalare Zielvariablen $y_{i,t}$ zu jedem Zeitschritt $t$ gebunden.
Wie in vorheriger Auflistung deutlich wurde, können die zeitabhängigen Variablen weiter unterteil werden in Known Inputs ($x_{i,t}$) und Observed Inputs ($z_{i,t}$).
Wichtig sind außerdem sogenannte Quantile, denn sie ermöglichen die Vorhersage von Ergebnisintervallen, anstatt nur einzelner Werte und ermöglichen so die Aussage über Best- und Worst-Case Werte (z.B. Ausgabe des 10., 50. und 90. Perzentil jedes Zeitschrittes)~\cite{Lim.19.12.2019}.

Formel~\ref{eq:tft} beschreibt die Prognose des $q$-ten Quantils des $\tau$-ten Vorhersageschrittes zum Zeitpunkt $t$.
Dabei werden alle Informationen innerhalb des endlichen Look-Back-Windows $k$ mit einbezogen inklusive der Zielvariablen $y$ bis einschließlich des Startpunkts der Vorhersage $t$ ($y_{i,t-k:t} = \{y_{j,t-k}, \ldots, y_{j,t}\}$) und bekannter Variablen $x$ für den gesamten Zeitraum ($x_{i,t-k:t+\tau} = \{x_{i,t-k}, \ldots, x_{i,t}, \ldots, x_{i,t+\tau}\}$)~\cite{Lim.19.12.2019}.
\begin{equation}
 \label{eq:tft}
 \hat{y}_i(q, \tau, T) = f_q(\tau, y_{j,t-k:t}, z_{i,t-k:t}, x_{j,t-k:t+T}, s_i)
\end{equation}

Im betrachteten Anwendungsfall der Vorhersage von \ac{MOER}-Werten sind die bekannten Variablen die ..., die unbekannten Variablen die.. und die statische Co-Variante das Land Deutschland oder Schweden~\cite{Labiadh.2023}.

Abbildung~\ref{FIG:tft-architecture} zeigt den Aufbau eines \ac{TFT}s.
\begin{figure}
 \caption{Vereinfachte Darstellung des Aufbaus eines \ac{TFT}~\cite{Labiadh.2023}.}
 {\includegraphics[width=0.90\textwidth]{\figdir/TFT-architecture}}
 \label{FIG:tft-architecture}
\end{figure}

Gating-Mechanismen in Form von \ac{GRN}s verfolgen das Ziel, nicht-lineare Verarbeitung nur dort anzuwenden, wo sie nötig ist.
Sie dienen dazu, ungenutzte Komponenten zu überspringen, sodass die Tiefe und Komplexität des Netzwerkes anpassungsfähig ist, um ein breites Spektrum an Szenarien und Datensätzen abdecken zu können~\cite{Lim.19.12.2019}.

Ein Variable Selection Network dient dazu, die relevanten Input-Variablen für jeden Zeitschritt auszuwählen.
Dadurch dass eine Vielzahl von Variablen verfügbar ist, ist es essenziell, die Relevanz und den Beitrag der einzelnen Variablen zu untersuchen.
Die Variablen Auswahl, in der Architektur-Abbildung unten zu finden, wird auf statische und zeitabhängige Kovarianten angewendet.
Sie hilft, die auffälligsten Merkmale herauszufinden und diejenigen, die sich negativ auf das Ergebnis auswirken, herauszufiltern.
Dadurch kann sie die Leistung des Modells erheblich verbessern~\cite{Lim.19.12.2019}.

Ein wichtiger Bestandteil sind außerdem die statischen Kovariaten-Kodierer (Static Covariate Encoders).
Mit Hilfe von diesen werden verschiedene Kontextvektoren erstellt, nämlich für die Auswahl zeitlicher Variablen, die lokale Verarbeitung zeitlicher Variablen und das Anreichern von zeitlichen Merkmale mit statischen Variablen.
Diese werden an den verschiedenen Stellen im Decoder verknüpft, um statische Merkmale in das Netzwerk zu integrieren.
Das unterscheidet das \ac{TFT}-Netzwerk von anderen Architekturen für die Zeitreihenprognose, die für statische Metadaten keine separaten Kodierer verwenden~\cite{Lim.19.12.2019, Labiadh.2023}.

Sowohl kurzfristige als auch langfristige zeitliche Zusammenhänge zu erfassen ist eine der Hauptaufgaben bei der Zeitreihenvorhersage.
Um beides ausreichend abdecken zu können, werden bei einem \ac{TFT} Sequence-to-Sequence-Schichten (kurzfristige Prognosen) und ein Multi-Head-Attention-Block (langfristige Prognosen) eingesetzt.
Die Sequence-to-Sequence-Schichten sind die Alternative zur Positionskodierung, die in Transformern üblicherweise verwendet wird.
Solche Schichten überzeugen durch ihre Fähigkeit, zeitliche Muster durch rekurrente Verbindungen festzuhalten~\cite{Labiadh.2023}.
Der in anderen Transformer-Architekturen verwendete Multi-Attention-Block wurde leicht abgewandelt, um die zeitlichen Beziehungen über verschiedene Zeitschritte zu erlernen.
Dafür wird ein sogenannter Self-Attention-Mechanismus eingesetzt, der es ermöglicht, Beziehungen über mehrere Zeitschritte hinweg zu erlernen.
Bei diesem wurde im Vergleich zu anderen Transformer-basierten Architekturen die Erklärbarkeit verbessert~\cite{Lim.19.12.2019}.
Er bewertet die Wichtigkeit einzelner Werte anhand von Beziehungen zwischen Schlüsseln und Abfragen~\cite{Labiadh.2023}.

Besonders ist zudem die verwendete Loss-Funktion.
Ein \ac{TFT} wird dadurch trainiert, dass die Quantilverluste über alle Quantilausgaben, d.h. Aussagen über die Verteilung des Zielwerts, minimiert werden.
Die spezielle Quantile Loss-Funktion, auch Pinball Regression genannt, ist durch Formel~\ref{eq:tft-quantile-loss} beschreibbar.
Bei Unterschätzungen wird der erste Term der Funktion für obere Quantile hoch gewichtet und bei Überschätzungen bekommt der zweite Term mehr Gewicht~\cite{Labiadh.2023}.
\begin{equation}
 \label{eq:tft-quantile-loss}
 QL(y, \hat{y}, q) = q \max(0, y - \hat{y}) + (1 - q) \max(0, \hat{y} - y)
\end{equation}

Die neue Form der Interpretierbarkeit eines \ac{TFT} ermöglicht ein einfaches Zurückverfolgen der relevantesten Zeitschritte für jede Prognose, was traditionelle Saisonalitäts- und Autokorrelationsanalysen ersetzen kann.
Außerdem hilft sie, signifikante Veränderungen zu erkennen, indem ein durchschnittlicher Aufmerksamkeitswert pro Vorhersagebereich berechnet wird und zu jedem Zeitpunkt als Vergleich dient~\cite{Labiadh.2023}.

\subsection{Implementierung und Trainingsprozess}
\section{Erstellung der Prognose-API}
\subsection{Konzeption der API-Architektur}
\subsection{Implementierung der API}

\chapter{Optimierung in Softwareanwendungen}
\section{Nachhaltige Scheduling Strategien}
\subsection{Dynamische Scheduling Modelle}
Es sollen zwei zeitliche Optimierungsmethoden untersucht werden, die im folgenden kurz beschrieben werden~\cite{Dodge.06212022}:
\begin{itemize}
 \item Flexibler Start: Ein flexibler Workload wird zu einem Zeitpunkt mit minimaler marginalen Kohlenstoffintensität in den nächsten N Stunden gestartet.
 Dabei wird der Workload nicht unterbrochen, sondern wird bis zur Fertigstellung ausgeführt.
 Es werden alle möglichen Startzeiten im Zeitfenster N mit einer Granularität von fünf Minuten betrachtet.
 \item Anhalten und Fortsetzen: Ein Workload wird (möglicherweise mehrmals) angehalten und wieder neu gestartet, um sicherzustellen, dass er ausschließlich zu kohlenstoffarmen Zeiten läuft.
 Der Workload wird dadurch in den nächsten (N + Dauer des Auftrags) Stunden durchgeführt.
 Wichtige Voraussetzungen für diese Methode sind ebenfalls die zeitliche Flexibilität und zudem funktioniert sie nur für Workloads, die unterbrochen und wieder neu aufgenommen werden können.
 Zur Umsetzung werden genügend viele fünfminütige Intervalle mit geringsten Grenzemissionen während des Zeitfensters (N + Dauer des Auftrags) gesucht.
 Es wird davon ausgegangen, dass die Unterbrechung und der Neustart des Auftrags sofort erfolgen und keine zusätzliche Energie verbraucht wird.
 Dies ähnelt den Spot-Instanzen auf bestehenden Cloud-Plattformen, die einen vom Nutzer festgelegten Preis als Schwellenwert für automatisches Pausieren verwenden.
\end {itemize}
Zu beachten ist dabei, dass unterschiedliche Regionen sich durch verschieden starke Varianzen auszeichnen.
In manchen Regionen schwankt die Emissionsgröße innerhalb eines Tages stark, wodurch sich diese sehr gut für die Methode des Anhaltens und Fortsetzens eignen.
Andere Regionen haben dagegen relativ gleichbleibende Emissionen, sodass zeitliche Optimierungen nur einen geringen Einfluss haben können.
In Abbildung~\ref{FIG:flexible-start} wird die mögliche Emissionsverringerung durch einen flexiblen Start anhand des DenseNet 201 veranschaulicht.
DenseNet201 ist ein Convolutional Neural Network mit wenigen Schichten, das in der Studie von~\cite{Dodge.06212022} weniger als eine halbe Stunde benötigte.
Bei vielen Regionen ist eine Emissionsreduzierung um mehr als 20\% möglich, das beste Ergebnis liegt bei 80\% für die Region West US\@.
Die Wirksamkeit der eingesetzten Methode hängt demnach auch stark von der betrachteten Region ab~\cite{Dodge.06212022}.
\begin{figure}
 \caption{Die zu erwarteten Emissionseinsparungen durch Verschiebung der Startzeit um bis zu 24 Stunden (Flexible Start) für Dense 201~\cite{Dodge.06212022}}
 {\includegraphics[width=0.7\textwidth]{\figdir/flexible-start_measuring-carbon-intensity-of-ai}}
 \label{FIG:flexible-start}
\end{figure}
Betrachtet man ein zeitintensiveres Experiment, wie das Training eines Language Modells mit sechs Millionen Parametern, ist das Gegenteil zu beobachten.
Beim flexiblen Start ist das Optimierungspotential sehr gering (meist weniger als 1\%), jedoch bietet das Anhalten und Fortsetzen gute Optimierungsergebnisse.
In vielen Regionen sind Emissionsreduzierungen um mehr als 10\% und in der Region West US erneut am meisten mit ungefähr 28\%~\cite{Dodge.06212022}.
\subsection{Konzeption der Architekturanpassungen}
%Geplante Skalierung
%Dynamische Skalierung
%Dynamische Ressourcenanpassung
%Optimierung des Datenzugriffs
\subsection{Anpassung und Interoperabilität in vorhandenen Systemen}
Skalierung bedeutet im Kontext des Softwarebetriebs eine Erhöhung oder Verringerung der Rechen-, Speicher- oder Netzwerkressourcen, die für einen bestimmten Workload genutzt werden.
Wohingegen man in herkömmlichen, dedizierten Hosting-Umgebungen durch die verfügbaren Hardwareressourcen begrenzt ist, bietet eine Cloud-basierte Anwendung diese Möglichkeit.
Es kann zudem zwischen vertikaler Skalierung (Scaling Up) und horizontaler Skalierung (Scaling Out) unterschieden werden.
Bei der vertikalen Skalierung wird die Rechenleistung erhöht und die Infrastruktur beibehalten~\cite{francois}.
\subsection{Grenzen}
%Für welche Architektur geeignet
Es gilt zu beachten, dass die analysierten Optimierungen ihre Grenzen haben.
Es handelt sich nicht um allgemein gültige, immer anwendbare Lösungen, sondern vielmehr um Vorschläge oder Richtlinien, die unter bestimmten Umständen durchaus positive Auswirkungen haben können.
Eine wichtige Einschränkung kann ein mögliches Fälligkeitsdatum oder eine hohe Dringlichkeit sein~\cite{Dodge.06212022}.
Ist bekannt, dass eine Aufgabe zu einem bestimmten Zeitpunkt angefangen oder sogar bereits abgeschlossen sein muss, hat es keinen Nutzen, wenn der nächste kohlenstoffarme Zeitraum nach diesem Fälligkeitsdatum liegt.
Allgemein können die zeitlichen Verschiebungen zu Verspätungen führen und diese können wiederum einen Anstieg von Emissionen durch andere Teile des Projekts verursachen.
Es ist deshalb stets wichtig, die Vorteile der eingesetzten Maßnahmen gegenüber ihrem Aufwand abzuwägen~\cite{Dodge.06212022}.
\section{Simulationsgestützte Umsetzung}
\subsection{Simulationsumgebung und -szenarien}
\subsection{Durchführung und Datensammlung}

\chapter{Ergebnisse und Diskussion}
\section{Bewertung des Prognosemodells}
\section{Effektivität der nachhaltigen Scheduling-Optimierung}
\subsection{Analyse der Auswirkung auf Energieeffizienz und Kohlenstoffintensität}
\subsection{Vergleich mit traditionellen Scheduling-Methoden}
\section{Zusammenfassung der Ergebnisse aus Simulationen}
\subsection{Identifizierte Einsparungspotenziale}
\subsection{Nachhaltigkeitsbewertung der implementierten Strategien}

\chapter{Schlussfolgerung und Ausblick}
\section{Empfehlungen für die Softwareentwicklungspraxis}
\section{Vorschläge für zukünftige Forschungen}
